const FocusAnyShim={init(){if(window.focusany)return;const t={onPluginReady(t){const n=()=>{t({actionName:"",actionMatch:null,actionMatchFiles:[],requestId:"",reenter:!1,isView:!1})};"loading"===document.readyState?document.addEventListener("DOMContentLoaded",n):n()},copyText:t=>navigator.clipboard&&navigator.clipboard.writeText?(navigator.clipboard.writeText(t),!0):(console.error("FocusAny Shim: copyText() requires clipboard permission in web environment"),!1),isMacOs:()=>navigator.platform.toLowerCase().includes("mac"),isWindows:()=>navigator.platform.toLowerCase().includes("win"),isLinux:()=>navigator.platform.toLowerCase().includes("linux"),showNotification(n,e){t.showToast(n,{duration:5e3,status:"info"})},showToast(t,n){const e="number"==typeof n?.duration&&n.duration>=0?n.duration:3e3,o=["info","success","error"].includes(n?.status)?n.status:"info",r=t=>{const n='xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16" fill="currentColor"';switch(t){case"info":return`<svg ${n}><circle cx="8" cy="8" r="7" fill="rgba(255,255,255,0.15)" stroke="currentColor" stroke-width="1"/><path d="M8 4a.5.5 0 0 1 .5.5v3a.5.5 0 0 1-1 0v-3A.5.5 0 0 1 8 4zM8 11a.75.75 0 1 1 0-1.5.75.75 0 0 1 0 1.5z"/></svg>`;case"success":return`<svg ${n}><circle cx="8" cy="8" r="7" fill="rgba(255,255,255,0.15)" stroke="currentColor" stroke-width="1"/><path d="M10.854 5.146a.5.5 0 0 1 0 .708l-3 3a.5.5 0 0 1-.708 0l-1.5-1.5a.5.5 0 1 1 .708-.708L7.5 7.793l2.646-2.647a.5.5 0 0 1 .708 0z"/></svg>`;case"error":return`<svg ${n}><circle cx="8" cy="8" r="7" fill="rgba(255,255,255,0.15)" stroke="currentColor" stroke-width="1"/><path d="M5.354 4.646a.5.5 0 1 0-.708.708L7.293 8l-2.647 2.646a.5.5 0 0 0 .708.708L8 8.707l2.646 2.647a.5.5 0 0 0 .708-.708L8.707 8l2.647-2.646a.5.5 0 0 0-.708-.708L8 7.293 5.354 4.646z"/></svg>`;default:return`<svg ${n}><circle cx="8" cy="8" r="6" fill="rgba(255,255,255,0.15)"/></svg>`}},a={info:{background:"#1890ff",color:"#ffffff",icon:r("info")},success:{background:"#52c41a",color:"#ffffff",icon:r("success")},error:{background:"#ff4d4f",color:"#ffffff",icon:r("error")}}[o];let i=document.getElementById("focusany-shim-toast-container");i||(i=document.createElement("div"),i.id="focusany-shim-toast-container",i.style.cssText='\n                        position: fixed !important;\n                        top: 20px !important;\n                        right: 20px !important;\n                        z-index: 999999 !important;\n                        font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif !important;\n                        pointer-events: none !important;\n                        max-width: 350px !important;\n                        width: auto !important;\n                    ',document.body.appendChild(i));const s=document.createElement("div");s.style.cssText=`\n                    background: ${a.background} !important;\n                    color: ${a.color} !important;\n                    padding: 12px 30px 12px 16px !important;\n                    margin-bottom: 10px !important;\n                    border-radius: 6px !important;\n                    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3) !important;\n                    font-size: 14px !important;\n                    line-height: 1.4 !important;\n                    width: 100% !important;\n                    max-width: 320px !important;\n                    word-wrap: break-word !important;\n                    opacity: 0 !important;\n                    transform: translateX(350px) !important;\n                    transition: all 0.3s ease !important;\n                    pointer-events: auto !important;\n                    cursor:default !important;\n                    border: none !important;\n                    outline: none !important;\n                    text-decoration: none !important;\n                    box-sizing: border-box !important;\n                    display: block !important;\n                    position: relative !important;\n                    min-height: 20px !important;\n                `;const c=document.createElement("div");c.style.cssText="\n                    display: flex !important;\n                    align-items: center !important;\n                    gap: 8px !important;\n                ";const l=document.createElement("span");l.innerHTML=a.icon,l.style.cssText="\n                    font-size: 16px !important;\n                    line-height: 1 !important;\n                    flex-shrink: 0 !important;\n                    padding: 4px 6px !important;\n                    border-radius: 4px !important;\n                    display: inline-flex !important;\n                    align-items: center !important;\n                    justify-content: center !important;\n                ";const p=document.createElement("span");p.textContent=t,p.style.cssText="\n                    flex: 1 !important;\n                ",c.appendChild(l),c.appendChild(p),s.appendChild(c);const m=document.createElement("span");m.textContent="Ã—",m.style.cssText="\n                    position: absolute !important;\n                    top: 50% !important;\n                    right: 8px !important;\n                    transform: translateY(-50%) !important;\n                    font-size: 16px !important;\n                    font-weight: bold !important;\n                    cursor: pointer !important;\n                    color: rgba(255, 255, 255, 0.8) !important;\n                    line-height: 1 !important;\n                    width: 20px !important;\n                    height: 20px !important;\n                    text-align: center !important;\n                    display: flex !important;\n                    align-items: center !important;\n                    justify-content: center !important;\n                    border-radius: 50% !important;\n                    background: rgba(255, 255, 255, 0.1) !important;\n                    transition: all 0.2s ease !important;\n                    backdrop-filter: blur(4px) !important;\n                ",m.addEventListener("mouseenter",()=>{m.style.color="#ffffff !important",m.style.backgroundColor="rgba(255, 255, 255, 0.2) !important",m.style.transform="translateY(-50%) scale(1.1) !important"}),m.addEventListener("mouseleave",()=>{m.style.color="rgba(255, 255, 255, 0.8) !important",m.style.backgroundColor="rgba(255, 255, 255, 0.1) !important",m.style.transform="translateY(-50%) scale(1) !important"}),m.addEventListener("click",t=>{t.stopPropagation(),d()}),s.appendChild(m),i.appendChild(s),setTimeout(()=>{s.style.setProperty("opacity","1","important"),s.style.setProperty("transform","translateX(0)","important")},10);const d=()=>{s.style.setProperty("opacity","0","important"),s.style.setProperty("transform","translateX(350px)","important"),setTimeout(()=>{s.parentNode&&s.parentNode.removeChild(s),i&&0===i.children.length&&i.parentNode&&i.parentNode.removeChild(i)},300)};e>0&&setTimeout(d,e)},db:{put(n){const e=`db:${n._id}`;try{return localStorage.setItem(e,JSON.stringify(n)),{ok:!0,id:n._id,rev:n._rev||t.util.randomString(16)}}catch(t){return console.error("FocusAny Shim: db.put() failed:",t),{ok:!1,id:n._id,rev:""}}},get(t){const n=`db:${t}`,e=localStorage.getItem(n);if(e)try{return JSON.parse(e)}catch(t){return console.error("FocusAny Shim: db.get() failed:",t),null}return null},remove(t){const n="string"==typeof t?t:t._id,e=`db:${n}`;try{return localStorage.removeItem(e),{ok:!0,id:n,rev:""}}catch(t){return console.error("FocusAny Shim: db.remove() failed:",t),{ok:!1,id:n,rev:""}}},bulkDocs(t){const n=[];for(const e of t){const t=this.put(e);n.push(t)}return n},allDocs(t){const n=[],e=t?`db:${t}`:"db:";for(const t of Object.keys(localStorage))if(t.startsWith(e)){const e=localStorage.getItem(t);if(e)try{n.push(JSON.parse(e))}catch(t){console.error("FocusAny Shim: db.allDocs() failed:",t)}}return n},postAttachment(n,e,o){const r=`dbAttachment:${n}`;try{const a=localStorage.getItem(r),i=a?JSON.parse(a):{};return i[o]=t.util.bufferToBase64(e),localStorage.setItem(r,JSON.stringify(i)),{ok:!0,id:n,rev:""}}catch(t){return console.error("FocusAny Shim: db.postAttachment() failed:",t),{ok:!1,id:n,rev:""}}},getAttachment(n){const e=`dbAttachment:${n}`,o=localStorage.getItem(e);if(o)try{const n=JSON.parse(o),e=Object.keys(n)[0];if(e)return t.util.base64ToBuffer(n[e])}catch(t){console.error("FocusAny Shim: db.getAttachment() failed:",t)}return null},getAttachmentType(t){const n=`dbAttachment:${t}`,e=localStorage.getItem(n);if(e)try{const t=JSON.parse(e);return Object.keys(t)[0]||null}catch(t){console.error("FocusAny Shim: db.getAttachmentType() failed:",t)}return null}},dbStorage:{setItem(t,n){localStorage.setItem(t,JSON.stringify(n))},getItem(t){const n=localStorage.getItem(t);return n?JSON.parse(n):null},removeItem(t){localStorage.removeItem(t)}},util:{randomString(t){const n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";let e="";for(let o=0;o<t;o++)e+=n.charAt(Math.floor(62*Math.random()));return e},bufferToBase64:t=>btoa(String.fromCharCode.apply(null,Array.from(t))),base64ToBuffer(t){const n=atob(t),e=new Uint8Array(n.length);for(let t=0;t<n.length;t++)e[t]=n.charCodeAt(t);return e},datetimeString:()=>(new Date).toISOString(),base64Encode:t=>btoa(JSON.stringify(t)),base64Decode:t=>JSON.parse(atob(t)),md5:t=>(console.error("FocusAny Shim: util.md5() is not supported in web environment, use crypto.subtle instead"),""),save(t,n,e){try{const e=new Blob([n],{type:"application/octet-stream"}),o=URL.createObjectURL(e),r=document.createElement("a");return r.href=o,r.download=t,document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(o),!0}catch(t){return console.error("FocusAny Shim: util.save() failed:",t),!1}}}};const n=function t(n="focusany",e){return new Proxy(()=>{},{get(o,r){const a=`${n}.${String(r)}`;return"focusany"===n&&e&&r in e?e[r]:t(a,null)},apply(t,e,o){throw console.error(`FocusAny Shim: ${n}() is not supported in web environment`),new Error(`FocusAny function ${n}() is not available in web environment`)}})}("focusany",t);window.focusany=n}};"undefined"!=typeof window&&FocusAnyShim.init();
